<ng-container *ngIf="(authorized$ | async); else authorizing">
  <mat-sidenav-container *ngIf="(clients$ | async) as clients">
    <mat-sidenav mode="push" [opened]="sidebarOpen$ | async" (openend)="sidebarOpened()" (closed)="sidebarClosed()">
      <mat-toolbar class="mat-elevation-z4" color="primary">
        <mat-toolbar-row>
          <span>{{appName}}</span>
        </mat-toolbar-row>
      </mat-toolbar>
      <mat-nav-list>
        <!-- <h3 mat-subheader>{{appName}}</h3> -->
        <a *ngFor="let item of menuItems" [routerLink]="item.path" routerLinkActive="selected" mat-list-item>
          <span>{{item.text}}</span>
          <!-- <span class="spacer"></span> -->
          <mat-icon mat-list-icon *ngIf="item.icon" [svgIcon]="item.icon"></mat-icon>
        </a>
        <ng-container *ngIf="clients?.length">
          <mat-divider></mat-divider>
          <a *ngFor="let client of clients" [routerLink]="clientPath(client)" routerLinkActive="selected" mat-list-item>
            <mat-icon mat-list-icon *ngIf="client.icon" [svgIcon]="client.icon"></mat-icon>
            <span>{{client.name}}</span>
          </a>
        </ng-container>
        <mat-divider></mat-divider>
        <a mat-list-item routerLink="/logout" (click)="logout()">
          <span>Logout</span>
          <span class="spacer"></span>
          <!-- <mat-icon svgIcon="user-solid-circle"></mat-icon> -->
          <!-- <mat-icon mat-list-icon svgIcon="exit"></mat-icon> -->
        </a>
      </mat-nav-list>
    </mat-sidenav>
    <mat-sidenav-content>
      <router-outlet></router-outlet>
      <!--
      <mat-toolbar class="app-nav mat-elevation-z4" color="primary">
        <mat-toolbar-row>
          <a mat-mini-fab (click)="sidenav.open()">
            <mat-icon aria-label="Menu" svgIcon="menu"></mat-icon>
          </a>
          <span>{{appName}}</span>
          <a mat-button routerLink="/">Home</a>
          <a *ngFor="let client of clients" mat-button [routerLink]="clientPath(client)" (click)="goToClient(client)">
            {{client.name}}
          </a>
      -->
      <!--
          <span fxFlex></span>
          <a mat-icon-button [matMenuTriggerFor]="appMenu">
            <mat-icon svgIcon="user-solid-circle"></mat-icon>
          </a>
          <mat-menu #appMenu="matMenu">
            <a mat-menu-item (click)="logout()">Logout</a>
          </mat-menu>
          -->
      <!--
        </mat-toolbar-row>
      </mat-toolbar>

      <div class="app-content">
        <router-outlet></router-outlet>
      </div>
      -->
    </mat-sidenav-content>
  </mat-sidenav-container>
</ng-container>

<ng-template #authorizing>
  <mat-card>
    <mat-card-title class="center">Authorizing Application</mat-card-title>
    <mat-card-content fxLayout fxLayoutAlign="center">
      <mat-spinner></mat-spinner>
    </mat-card-content>
  </mat-card>
</ng-template>
