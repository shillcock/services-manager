<div class="app-wrapper" *ngIf="user?.authenticated; else notAuthenticated">
  <mat-sidenav-container>
    <!--
    <mat-sidenav #sidenav mode="push">
      <mat-nav-list>
        <a mat-list-item routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" (click)="sidenav.toggle()">Servicves Manager</a>
        <ng-container *ngIf="(clients$ | async) as clients">
          <mat-divider></mat-divider>
          <mat-list-item *ngFor="let client of clients">
            <a [routerLink]="clientPath(client)" (click)="goToClient(client); sidenav.toggle()">
              {{client.name}}
            </a>
            <span class="spacer"></span>
            <a mat-icon-button (click)="$event.preventDefault(); sidenav.toggle()">
              <mat-icon>info</mat-icon>
            </a>
          </mat-list-item>
        </ng-container>
        <mat-divider></mat-divider>
        <a mat-list-item (click)="logout()">Logout</a>
      </mat-nav-list>
    </mat-sidenav>
    -->
    <mat-sidenav-content>
      <mat-toolbar class="app-nav mat-elevation-z4" color="primary">
        <mat-toolbar-row>
          <!--
            <a mat-mini-fab (click)="sidenav.toggle()">
              <mat-icon aria-label="Menu">menu</mat-icon>
            </a>
          -->
          <span>Services Manager</span>
          <a mat-button routerLink="/">Home</a>
          <ng-container *ngIf="(clients$ | async) as clients">
            <a *ngFor="let client of clients" mat-button [routerLink]="clientPath(client)" (click)="goToClient(client)">
              {{client.name}}
            </a>
          </ng-container>
          <span class="spacer"></span>
          <a mat-icon-button [matMenuTriggerFor]="appMenu">
            <mat-icon>more_vert</mat-icon>
          </a>
          <mat-menu #appMenu="matMenu">
            <a mat-menu-item (click)="logout()">Logout</a>
          </mat-menu>
        </mat-toolbar-row>
      </mat-toolbar>

      <div class="app-content">
        <router-outlet></router-outlet>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>

<ng-template #notAuthenticated>
  <mat-card>
    <mat-card-content>
      <h2>You are not authorized to view this page.</h2>
      <button mat-raised-button color="warn" routerLink="/">
        Click here to login
      </button>
    </mat-card-content>
  </mat-card>
</ng-template>
