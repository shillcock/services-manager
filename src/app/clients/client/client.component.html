<div class="sm-client">
  <mat-card *ngIf="client; else clientNotFound">
    <mat-card-content>
      <h2>{{client.name}}</h2>
      <nav mat-tab-nav-bar>
        <a *ngFor="let service of client.services"
           mat-tab-link
           [routerLink]="['../', service.id]"
           routerLinkActive
           #rla="routerLinkActive"
           [active]="rla.isActive">
          {{service.name}}
        </a>
      </nav>
      <div class="service-content">
        <ng-container *ngIf="(serviceContext$ | async) as context; else loading">
          <sm-service [context]="context"></sm-service>
        </ng-container>
        <ng-template #loading>
          <sm-loading text="Loading"></sm-loading>
        </ng-template>
      </div>
    </mat-card-content>
  </mat-card>

  <ng-template #clientNotFound>
    <mat-card>
      <mat-card-content>
        <h2>Client not found</h2>
        <button mat-raised-button color="warn" routerLink="/">
          Go Home
        </button>
      </mat-card-content>
    </mat-card>
  </ng-template>
</div>
